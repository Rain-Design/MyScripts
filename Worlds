local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/Rain-Design/Libraries/main/Revenant.lua", true))()
local Flags = Library.Flags

local Players = game:GetService("Players")
local Player = Players.LocalPlayer

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Loader = require(ReplicatedStorage.src.Loader)
local GUIService = Loader.load_client_service(ReplicatedStorage.src.client.Services.UpgradeServiceClient, "GUIService")

local Resource = Player["_stats"].resource
local Wave = game:GetService("Workspace")["_wave_num"]
local Units = game:GetService("Workspace")["_UNITS"]

local Window = Library:Window({
    Text = "Farming"
})

Window:Toggle({
    Text = "Auto-Upgrade",
    Flag = "Upgrade"
})

Window:Toggle({
    Text = "Sell At 50",
    Flag = "Sell"
})

local function SellAll()
    for _,v in pairs(Units:GetChildren()) do
        if v:FindFirstChild("_stats") and v._stats.player.value == game.Players.LocalPlayer then
            game:GetService("ReplicatedStorage").endpoints.client_to_server.sell_unit_ingame:InvokeServer(v)
        end
    end
end

task.spawn(function()
    while true do
        if Flags.Sell then
            if Wave.Value >= 50 then
                SellAll()
            end
        end
        task.wait(.5)
    end
end)

local Price
while true do
if Flags.Upgrade then
for _,v in next, Units:GetChildren() do
    if not Flags.Upgrade then break end
    if v:FindFirstChild("_stats") and v._stats.player.Value == Player then
        GUIService.unit_upgrade_ui:show(v, v._stats.uuid.Value)
        wait(.2)
        if Player.PlayerGui.UnitUpgrade.Primary.Container.Main.Main.Buttons.Upgrade.Main["Text"].Text ~= "Max" then
        Price = string.gsub(Player.PlayerGui.UnitUpgrade.Primary.Container.Main.Main.Buttons.Upgrade.Main["Text"].Text, "%D", "")
        if Resource.Value > tonumber(Price) then
            game:GetService("ReplicatedStorage").endpoints.client_to_server.upgrade_unit_ingame:InvokeServer(v)
            local FirstUpper = string.gsub(tostring(v),"^%l", string.upper)
            Library:Notification({
                Text = "-"..tostring(Price).."Â¥ ".."| ".."[".._.."] "..FirstUpper.." - ".."Upgrade: "..v._stats.upgrade.Value,
                Duration = 10
            })
            print(tonumber(Price))
        end
        end
    end
end
end
wait()
end
